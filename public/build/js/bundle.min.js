!function(){if(!document.querySelector("#horas"))return void console.warn("No se encontró el contenedor de horas (#horas)");const e=document.querySelector('[name="categoria_id"]'),o=document.querySelectorAll('[name="dia"]'),a=document.querySelector('[name="dia_id"]'),t=document.querySelector('[name="hora_id"]');if(!e||0===o.length||!a||!t)return void console.error("Faltan campos obligatorios en el formulario.");let n={categoria_id:e.value||"",dia:+a.value||""};function s(e){console.log("Cambio en formulario:",e.target.name,e.target.value),n[e.target.name]=e.target.value,t.value="",a.value="";const o=document.querySelector(".horas__hora--seleccionada");o&&o.classList.remove("horas__hora--seleccionada"),Object.values(n).includes("")?console.log("Datos incompletos, no se realiza búsqueda."):r()}async function r(){const e=window.BASE_URL,{dia:o,categoria_id:a}=n;if(!e)return void console.error("BASE_URL no está definida");const t=`${e}api/eventos-horario?dia_id=${o}&categoria_id=${a}`;console.log("Buscando eventos en URL:",t);try{const e=await fetch(t);if(!e.ok)throw new Error("HTTP error! status: "+e.status);const o=await e.json();console.log("Eventos recibidos:",o),function(e){console.log("Actualizando horas disponibles...");const o=document.querySelectorAll("#horas li");o.forEach(e=>e.classList.add("horas__hora--deshabilitado"));const a=e.map(e=>e.hora_id);console.log("Horas tomadas:",a);const t=Array.from(o);t.filter(e=>!a.includes(+e.dataset.horaId)).forEach(e=>e.classList.remove("horas__hora--deshabilitado"));const n=document.querySelectorAll("#horas li:not(.horas__hora--deshabilitado)");n.forEach(e=>e.addEventListener("click",i)),console.log("Horas habilitadas: "+n.length)}(o),c()}catch(e){console.error("Error al buscar eventos:",e)}}function c(){const e=t.value;if(console.log("Hora seleccionada actualmente:",e),!e)return void console.log("No hay hora seleccionada para marcar.");const o=document.querySelector(`[data-hora-id="${e}"]`);if(o){o.classList.contains("horas__hora--deshabilitado")&&(console.log("Hora seleccionada estaba deshabilitada, habilitando para edición."),o.classList.remove("horas__hora--deshabilitado"));const e=document.querySelector(".horas__hora--seleccionada");e&&e.classList.remove("horas__hora--seleccionada"),o.classList.add("horas__hora--seleccionada")}else console.warn(`No se encontró la hora con data-hora-id="${e}" para marcar.`)}function i(e){const o=document.querySelector(".horas__hora--seleccionada");o&&o.classList.remove("horas__hora--seleccionada"),e.target.classList.add("horas__hora--seleccionada"),t.value=e.target.dataset.horaId;const s=document.querySelector('[name="dia"]:checked');s&&(a.value=s.value,n.dia=s.value),console.log(`Hora seleccionada: ${t.value}, Día seleccionado: ${a.value}`)}console.log("Estado inicial busqueda:",n),e.addEventListener("change",s),o.forEach(e=>e.addEventListener("change",s)),Object.values(n).includes("")?console.log("Faltan datos para iniciar la búsqueda de eventos."):async function(){console.log("Iniciando app, buscando eventos..."),await r(),c()}()}(),function(){const e=document.querySelector("#ponentes");if(e){let a=[],t=[];const n=document.querySelector("#listado-ponentes"),s=document.querySelector('[name="ponente_id"]');function o(e){document.querySelectorAll(".listado-ponentes__ponente--seleccionado").forEach(e=>e.classList.remove("listado-ponentes__ponente--seleccionado")),e.target.classList.add("listado-ponentes__ponente--seleccionado"),s.value=e.target.dataset.ponenteId}!async function(){const e=window.BASE_URL;if(!e)return void console.error("BASE_URL no está definida");const o=e+"api/ponentes";try{const e=await fetch(o),t=await e.json();a=function(e=[]){return e.map(e=>({nombre:`${e.nombre.trim()} ${e.apellido.trim()}`,id:e.id}))}(t)}catch(e){console.error("Error al buscar eventos:",e)}}(),e.addEventListener("input",(function(e){const s=e.target.value;if(s.length>3){const e=new RegExp(s,"i");t=a.filter(o=>e.test(o.nombre.toLowerCase()))}else t=[];!function(){for(;n.firstChild;)n.removeChild(n.firstChild);if(t.length>0)t.forEach(e=>{const a=document.createElement("LI");a.classList.add("listado-ponentes__ponente"),a.textContent=e.nombre,a.dataset.ponenteId=e.id,a.onclick=o,n.appendChild(a)});else{const e=document.createElement("P");e.classList.add("listado-ponentes__no-resultado"),e.textContent="No hay resultados para esta busqueda",n.appendChild(e)}}()})),s.value&&(async()=>{const e=await async function(e){const o=window.BASE_URL;if(!o)return void console.error("BASE_URL no está definida");const a=`${o}api/ponente?id=${e}`,t=await fetch(a);return await t.json()}(s.value),o=document.createElement("LI");o.classList.add("listado-ponentes__ponente","listado-ponentes__ponente--seleccionado"),o.textContent=`${e.nombre} ${e.apellido}`,n.appendChild(o)})()}}(),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#tags__input"),o=document.querySelector("#tags"),a=document.querySelector('[name="tags"]');let t=[];function n(){o.textContent="",t.forEach(e=>{const a=document.createElement("LI");a.classList.add("formulario__tag"),a.textContent=e,a.ondblclick=s,o.appendChild(a)}),a.value=t.join(",")}function s(e){t=t.filter(o=>o!==e.target.textContent),n()}a&&""!==a.value&&(t=a.value.split(","),n()),e&&e.addEventListener("keypress",(function(o){if(44===o.keyCode){if(0===o.target.value.trim().length)return;o.preventDefault(),t=[...t,o.target.value.trim()],e.value="",n()}}))}));
//# sourceMappingURL=bundle.js.map
